# 휴식 팝업 스트레칭 이미지 기능 추가 완료

## 구현된 기능

### 1. 랜덤 이미지 매니저 클래스 추가
- **위치**: `ClockApp-ver2.py` 상단부
- **클래스**: `StretchImageManager`
- **기능**:
  - `stretchimage` 폴더의 모든 이미지 자동 감지 (PNG, JPG, JPEG, GIF, BMP)
  - 랜덤 이미지 선택 시 최근 5개 이미지는 제외하여 다양성 확보
  - 이미지 히스토리 관리로 같은 이미지 반복 방지

### 2. RestPopup 클래스 업데이트
- **이미지 로드**:
  - 팝업 생성 시 자동으로 랜덤 이미지 선택
  - 이미지 크기 자동 조정 (최대 280x200px, 비율 유지)
  
- **레이아웃 변경**:
  - 이미지가 있을 경우: 600x500 크기로 확장
  - 이미지가 없을 경우: 기존 400x380 크기 유지
  - 가로 레이아웃: 왼쪽에 이미지, 오른쪽에 타이머

### 3. 한글 인코딩 보장
- 파일 상단에 `# -*- coding: utf-8 -*-` 선언 유지
- 모든 한글 텍스트 정상 표시 보장

## 테스트 결과

### 이미지 감지 테스트
✅ `거북목001.png` 정상 감지
✅ 랜덤 선택 로직 정상 작동
✅ 히스토리 관리 (이미지 1개일 때 히스토리 무시 로직 작동)

### UI 테스트 시나리오
1. **이미지가 있을 때**:
   - 팝업 크기: 600x500
   - 왼쪽: 스트레칭 이미지 (최대 280x200)
   - 오른쪽: 원형 타이머 (120x120)
   - 레이아웃: 균형잡힌 가로 배치

2. **이미지가 없을 때**:
   - 팝업 크기: 400x380 (기존과 동일)
   - 중앙: 원형 타이머만 표시

## 향후 확장 방안

### 이미지 추가 방법
1. `stretchimage` 폴더에 이미지 파일 추가
2. 지원 형식: PNG, JPG, JPEG, GIF, BMP
3. 권장 크기: 400x300 이하 (자동 리사이징됨)

### 예시 이미지 이름 (권장)
- `거북목001.png`, `거북목002.png`
- `어깨운동001.png`, `어깨운동002.png`
- `목스트레칭001.png`, `목스트레칭002.png`
- `눈운동001.png`, `눈운동002.png`

### 히스토리 설정 조정
현재: `max_history = 5` (최근 5개 이미지 제외)
- 이미지가 10개 이상일 때 권장: 5~7
- 이미지가 5개 이하일 때: 자동으로 히스토리 무시

## 코드 변경 사항 요약

### 추가된 import
```python
import random
import glob
```

### 추가된 클래스
```python
class StretchImageManager:
    - _load_available_images(): 이미지 파일 검색
    - get_random_image(): 랜덤 이미지 선택 (히스토리 관리)
```

### 수정된 클래스
```python
class RestPopup:
    - __init__(): 이미지 로드 및 크기 조정
    - load_stretch_image(): 이미지 로드 및 리사이징
    - center_popup(): 이미지 유무에 따른 크기 조정
    - create_widgets(): 가로 레이아웃으로 이미지와 타이머 배치
```

## 주의 사항

1. **이미지 크기**: 너무 큰 이미지는 자동으로 축소되지만, 메모리 효율을 위해 적절한 크기 권장
2. **파일 인코딩**: 한글 파일명 지원 (UTF-8 인코딩)
3. **이미지 경로**: 실행 파일 기준 상대 경로 `stretchimage/` 사용

## 테스트 스크립트

`test_stretch_image.py` 파일로 이미지 로드 및 랜덤 선택 기능 테스트 가능:

```powershell
cd "d:\down\homepage\ClockApp\clock-ver2"
python test_stretch_image.py
```

---
**구현 완료**: 2025-10-28
**개발자**: GitHub Copilot
**상태**: ✅ 테스트 완료, 프로덕션 준비 완료
